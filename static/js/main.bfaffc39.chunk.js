(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{88:function(e,t,i){},89:function(e,t,i){"use strict";i.r(t);var n=i(0),c=i.n(n),a=i(9),r=i.n(a),s=i(24),l=i(29),o=i(18),u=i(52),d=i.n(u),j=i(58),b=[{id:"1",title:"Oceans 8",category:"Comedy",likes:4,dislikes:1},{id:"2",title:"Midnight Sun",category:"Comedy",likes:2,dislikes:0},{id:"3",title:"Les indestructibles 2",category:"Animation",likes:3,dislikes:1},{id:"4",title:"Sans un bruit",category:"Thriller",likes:6,dislikes:6},{id:"5",title:"Creed II",category:"Drame",likes:16,dislikes:2},{id:"6",title:"Pulp Fiction",category:"Thriller",likes:11,dislikes:3},{id:"7",title:"Pulp Fiction",category:"Thriller",likes:12333,dislikes:32},{id:"8",title:"Seven",category:"Thriller",likes:2,dislikes:1},{id:"9",title:"Inception",category:"Thriller",likes:2,dislikes:1},{id:"10",title:"Gone Girl",category:"Thriller",likes:22,dislikes:12}],h=Math.floor(10*Math.random()),g=Object(l.a)(Array(45)).map((function(e,t){return{id:(t+11).toString(),title:"Movie ".concat(t),category:"Thriller",likes:h,dislikes:h}})),m=new Promise((function(e,t){return setTimeout(e,100,[].concat(b,Object(l.a)(g)))})),f=i(30),O=i(119),p=i(134),v=i(132),x=i(122),k=i(124),y=i(123),C=i(125),N=i(3),w=i(116),M=i(133),E=Object(w.a)((function(e){return Object(M.a)({root:{background:e.palette.error.main,height:7,width:"100%",position:"relative",marginTop:e.spacing(1)},bar:function(t){var i=t.likes,n=i/(i+t.dislikes);return{background:e.palette.primary.main,height:7,width:"".concat(100*(n>1?1:n),"%"),zIndex:1,position:"absolute"}}})})),T=i(5),P=function(e){var t=e.className,i=E(e);return Object(T.jsx)("div",{className:Object(N.a)(i.root,t),children:Object(T.jsx)("div",{className:i.bar})})},L=Object(w.a)((function(e){return Object(M.a)({card:{width:300,margin:e.spacing(1),"&:hover":{boxShadow:e.shadows[10]}},cardTitle:{fontWeight:"bold"},likeButton:{display:"flex",justifyContent:"flex-end"}})})),S=function(e){switch(e){case!0:return"primary";case!1:return"secondary";default:return"inherit"}},I=function(e){switch(e){case!0:return"Like";case!1:return"Dislike";default:return""}},D=function(e){var t=e.title,i=e.category,n=e.likes,c=e.dislikes,a=e.onDelete,r=e.id,s=e.like,l=e.handleLike,o=L(),u=s?n+1:n,d=s||void 0===s?c:c+1;return Object(T.jsxs)(O.a,{className:o.card,children:[Object(T.jsx)(p.a,{title:t,className:o.cardTitle,action:Object(T.jsx)(v.a,{title:"Delete",children:Object(T.jsx)(x.a,{onClick:function(){return a(r)},children:Object(T.jsx)(y.a,{})})})}),Object(T.jsxs)(k.a,{children:[Object(T.jsx)("p",{children:"Category: ".concat(i)}),Object(T.jsx)("div",{className:o.likeButton,children:Object(T.jsx)(v.a,{title:I(s),children:Object(T.jsx)(x.a,{onClick:function(){return l(r)},children:Object(T.jsx)(C.a,{color:S(s)})})})}),Object(T.jsx)(P,{likes:u,dislikes:d})]})]})},W=i(126),A=i(135),B=i(130),F=i(136),R=i(127),G=i(128),J=Object(w.a)((function(e){return Object(M.a)({root:{height:500},container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120},buttonContainer:{"&>*":{margin:e.spacing(1)}},stepper:{display:"flex",flexDirection:"column",alignItems:"center"},inputLabel:{minWidth:150},pagination:{display:"flex",alignItems:"center",marginRight:e.spacing(4)},header:{display:"flex",justifyContent:"space-between"}})})),z=[4,8,12],q="All",H=function(){var e=Object(s.b)();c.a.useEffect((function(){e(K())}),[e]);var t=Object(s.c)(_),i=Object(s.c)(oe),n=Object(s.c)(ue),a=Object(s.c)(ee),r=t.reduce((function(e,t){return e.includes(t.category)?e:[].concat(Object(l.a)(e),[t.category])}),[q]),u=t.filter((function(e){return a===q||e.category===a})),d=u.length,j=Math.ceil(d/n),b=(i-1)*n,h=i*n,g=h>d?d:h,m=u.slice(b,g),f=function(t){e(Y({id:t}))},O=function(t){e($({id:t}))},p=J();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:p.header,children:[Object(T.jsxs)(W.a,{className:p.formControl,children:[Object(T.jsx)(A.a,{className:p.inputLabel,children:"Category"}),Object(T.jsx)(B.a,{value:a,onChange:function(i){var c=i.target.value;e(Z({category:c}));var a=t.filter((function(e){return c===q||e.category===c})).length;e(le({nbElements:n,nbMovies:a}))},children:r.map((function(e){return Object(T.jsx)(F.a,{value:e,children:e})}))})]}),Object(T.jsxs)("div",{className:p.pagination,children:[Object(T.jsxs)(W.a,{className:p.formControl,children:[Object(T.jsx)(A.a,{className:p.inputLabel,children:"Elements per page"}),Object(T.jsx)(B.a,{value:n,onChange:function(t){var i=t.target.value;e(le({nbElements:i,nbMovies:d}))},children:z.map((function(e){return Object(T.jsx)(F.a,{value:e,children:e})}))})]}),Object(T.jsxs)("div",{className:p.stepper,children:[Object(T.jsxs)("div",{className:p.buttonContainer,children:[Object(T.jsx)(x.a,{onClick:function(){i>te&&e(re())},children:Object(T.jsx)(R.a,{})}),i,Object(T.jsx)(x.a,{onClick:function(){i<j&&e(se())},children:Object(T.jsx)(G.a,{})})]}),Object(T.jsx)("div",{children:"".concat(b+1,"-").concat(g," of ").concat(d)})]})]})]}),Object(T.jsx)("div",{className:p.root,children:Object(T.jsx)("div",{className:p.container,children:m.map((function(e){return Object(T.jsx)(D,Object(o.a)(Object(o.a)({},e),{},{onDelete:f,handleLike:O}),e.id)}))})})]})},K=Object(f.b)("movies/fetchMovies",function(){var e=Object(j.a)(d.a.mark((function e(t,i){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()),Q={movies:[],category:q},U=Object(f.c)({name:"movies",initialState:Q,reducers:{deleteMovie:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{movies:e.movies.filter((function(e){return e.id!==t.payload.id}))})},changeCategory:function(e,t){e.category=t.payload.category},toggleLike:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{movies:e.movies.map((function(e){return e.id===t.payload.id?Object(o.a)(Object(o.a)({},e),{},{like:!e.like}):e}))})}},extraReducers:function(e){e.addCase(K.fulfilled,(function(e,t){var i;(i=e.movies).push.apply(i,Object(l.a)(t.payload))}))}}),V=U.reducer,X=U.actions,Y=X.deleteMovie,Z=X.changeCategory,$=X.toggleLike,_=function(e){return e.movies.movies},ee=function(e){return e.movies.category},te=1,ie={currentPage:te,nbElements:z[1]},ne=Object(f.c)({name:"pagination",initialState:ie,reducers:{previous:function(e){e.currentPage-=1},next:function(e){e.currentPage+=1},changeElements:function(e,t){var i=t.payload,n=i.nbMovies,c=i.nbElements;e.nbElements=c;var a=Math.ceil(n/c);e.currentPage=e.currentPage>=a?a:e.currentPage}},extraReducers:{}}),ce=ne.reducer,ae=ne.actions,re=ae.previous,se=ae.next,le=ae.changeElements,oe=function(e){return e.pagination.currentPage},ue=function(e){return e.pagination.nbElements},de={reducer:{movies:V,pagination:ce}},je=Object(f.a)(de),be=i(64),he=i(129),ge=(i(88),Object(be.a)({spacing:8}));r.a.render(Object(T.jsx)(s.a,{store:je,children:Object(T.jsx)(he.a,{theme:ge,children:Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(H,{})})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.bfaffc39.chunk.js.map