{"version":3,"sources":["movies.ts","components/ProgressBar_style.ts","components/ProgressBar.tsx","components/Card_style.ts","components/Card.tsx","index_style.ts","App.tsx","redux/movies.ts","redux/pagination.ts","redux/app.ts","index.tsx"],"names":["movies","id","title","category","likes","dislikes","getRandomNbLikes","Math","floor","random","additionalMovies","Array","map","e","index","toString","movies$","Promise","resolve","reject","setTimeout","makeStyles","theme","createStyles","root","background","palette","error","main","height","width","position","marginTop","spacing","bar","props","value","primary","zIndex","ProgressBar","className","classes","useStyles","clsx","card","margin","boxShadow","shadows","cardTitle","fontWeight","likeButton","display","justifyContent","getColor","isLiked","getTooltip","Card","onDelete","like","handleLike","nbLikes","nbDislikes","undefined","CardHeader","action","Tooltip","IconButton","onClick","Close","CardContent","ThumbUp","color","container","flexWrap","formControl","minWidth","buttonContainer","stepper","flexDirection","alignItems","inputLabel","pagination","marginRight","header","elements","ALL","App","dispatch","useDispatch","React","useEffect","fetchMovies","useSelector","selectMovies","currentPage","selectCurrentPage","nbElements","selectNbElements","selectCategory","categories","reduce","acc","movie","includes","filteredMovies","filter","nbMovies","length","nbPages","ceil","firstElementIndex","maxLastElementIndex","lastElementIndex","visibleMovies","slice","deleteMovie","toggleLike","FormControl","InputLabel","Select","onChange","event","target","changeCategory","changeElements","MenuItem","element","firstPage","previous","KeyboardArrowLeft","next","KeyboardArrowRight","createAsyncThunk","arg","thunkAPI","a","response","initialState","moviesSlice","createSlice","name","reducers","state","payload","extraReducers","builder","addCase","fulfilled","push","actions","paginationSlice","rootReducer","reducer","appStore","configureStore","createMuiTheme","ReactDOM","render","store","ThemeProvider","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bfaffc39.chunk.js","sourcesContent":["export type Movie = {\r\n  id: string\r\n  title: string\r\n  category: string\r\n  likes: number\r\n  dislikes: number\r\n}\r\n\r\nconst movies: Movie[] = [\r\n  {\r\n    id: '1',\r\n    title: 'Oceans 8',\r\n    category: 'Comedy',\r\n    likes: 4,\r\n    dislikes: 1\r\n  }, {\r\n    id: '2',\r\n    title: 'Midnight Sun',\r\n    category: 'Comedy',\r\n    likes: 2,\r\n    dislikes: 0\r\n  }, {\r\n    id: '3',\r\n    title: 'Les indestructibles 2',\r\n    category: 'Animation',\r\n    likes: 3,\r\n    dislikes: 1\r\n  }, {\r\n    id: '4',\r\n    title: 'Sans un bruit',\r\n    category: 'Thriller',\r\n    likes: 6,\r\n    dislikes: 6\r\n  }, {\r\n    id: '5',\r\n    title: 'Creed II',\r\n    category: 'Drame',\r\n    likes: 16,\r\n    dislikes: 2\r\n  }, {\r\n    id: '6',\r\n    title: 'Pulp Fiction',\r\n    category: 'Thriller',\r\n    likes: 11,\r\n    dislikes: 3\r\n  }, {\r\n    id: '7',\r\n    title: 'Pulp Fiction',\r\n    category: 'Thriller',\r\n    likes: 12333,\r\n    dislikes: 32\r\n  }, {\r\n    id: '8',\r\n    title: 'Seven',\r\n    category: 'Thriller',\r\n    likes: 2,\r\n    dislikes: 1\r\n  }, {\r\n    id: '9',\r\n    title: 'Inception',\r\n    category: 'Thriller',\r\n    likes: 2,\r\n    dislikes: 1\r\n  }, {\r\n    id: '10',\r\n    title: 'Gone Girl',\r\n    category: 'Thriller',\r\n    likes: 22,\r\n    dislikes: 12\r\n  },\r\n]\r\n\r\nconst getRandomNbLikes = Math.floor(Math.random() * 10)\r\n\r\nconst additionalMovies: Array<Movie> = [...Array(45)].map((e, index) => ({\r\n  id: (index + 11).toString(),\r\n  title: `Movie ${index}`,\r\n  category: 'Thriller',\r\n  likes: getRandomNbLikes,\r\n  dislikes: getRandomNbLikes\r\n}))\r\n\r\nexport const movies$: Promise<Movie[]> = new Promise((resolve, reject) => setTimeout(resolve, 100, [...movies, ...additionalMovies]))\r\n","import { makeStyles, Theme, createStyles } from \"@material-ui/core/styles\"\r\nimport { ProgressBarProps } from \"./ProgressBar\"\r\n\r\nexport default makeStyles((theme: Theme) => {\r\n\r\n    const barHeight = 7\r\n\r\n    return createStyles({\r\n        root: {\r\n            background: theme.palette.error.main,\r\n            height: barHeight,\r\n            width: \"100%\",\r\n            position: \"relative\",\r\n            marginTop: theme.spacing(1)\r\n        },\r\n        bar: (props: ProgressBarProps) => {\r\n            const { likes, dislikes } = props\r\n            const value = likes / (likes + dislikes)\r\n            return {\r\n                background: theme.palette.primary.main,\r\n                height: barHeight,\r\n                width: `${(value > 1 ? 1 : value) * 100}%`,\r\n                zIndex: 1,\r\n                position: \"absolute\"\r\n            }\r\n        }\r\n    })\r\n})","import React from \"react\"\r\nimport clsx from \"clsx\"\r\nimport useStyles from \"./ProgressBar_style\"\r\n\r\nexport type ProgressBarProps = {\r\n    likes: number\r\n    dislikes: number\r\n    className?: string\r\n}\r\n\r\nconst ProgressBar: React.FunctionComponent<ProgressBarProps> = (props) => {\r\n\r\n    const { className } = props\r\n    const classes = useStyles(props)\r\n\r\n    return (\r\n        <div className={clsx(classes.root, className)}>\r\n            <div className={classes.bar} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressBar","import { makeStyles, Theme, createStyles } from \"@material-ui/core/styles\"\r\n\r\n\r\nexport const useStyles = makeStyles((theme: Theme) => {\r\n\r\n    return createStyles({\r\n        card: {\r\n            width: 300,\r\n            margin: theme.spacing(1),\r\n            \"&:hover\": {\r\n                boxShadow: theme.shadows[10]\r\n            }\r\n        },\r\n        cardTitle: {\r\n            fontWeight: \"bold\"\r\n        },\r\n        likeButton: {\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\"\r\n        },\r\n    })\r\n})","import React from 'react'\r\nimport { Card as MUICard, CardHeader, CardContent, IconButton, Tooltip } from \"@material-ui/core\"\r\nimport { ThumbUp, Close } from \"@material-ui/icons\"\r\nimport ProgressBar from \"./ProgressBar\"\r\nimport { useStyles } from \"./Card_style\"\r\n\r\nimport { MovieWithLike } from '../redux'\r\n\r\n\r\nconst getColor = (isLiked?: boolean) => {\r\n    switch (isLiked) {\r\n        case true:\r\n            return \"primary\"\r\n        case false:\r\n            return \"secondary\"\r\n        default:\r\n            return \"inherit\"\r\n    }\r\n}\r\n\r\nconst getTooltip = (isLiked?: boolean) => {\r\n    switch (isLiked) {\r\n        case true:\r\n            return \"Like\"\r\n        case false:\r\n            return \"Dislike\"\r\n        default:\r\n            return \"\"\r\n    }\r\n}\r\n\r\ninterface CardProps extends MovieWithLike {\r\n    onDelete: (id: string) => void\r\n    handleLike: (id: string) => void\r\n}\r\n\r\nconst Card: React.FunctionComponent<CardProps> = (props) => {\r\n\r\n    const { title, category, likes, dislikes, onDelete, id, like: isLiked, handleLike } = props\r\n\r\n    const classes = useStyles()\r\n\r\n    const nbLikes = isLiked ? likes + 1 : likes\r\n    const nbDislikes = (isLiked || isLiked === undefined) ? dislikes : dislikes + 1\r\n\r\n    return (\r\n        <MUICard className={classes.card}>\r\n            <CardHeader\r\n                title={title}\r\n                className={classes.cardTitle}\r\n                action={\r\n                    <Tooltip title=\"Delete\">\r\n                        <IconButton onClick={() => onDelete(id)}>\r\n                            <Close />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                }\r\n            />\r\n            <CardContent>\r\n                <p>{`Category: ${category}`}</p>\r\n                <div className={classes.likeButton}>\r\n                    <Tooltip title={getTooltip(isLiked)}>\r\n                        <IconButton onClick={() => handleLike(id)}>\r\n                            <ThumbUp color={getColor(isLiked)} />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </div>\r\n                <ProgressBar likes={nbLikes} dislikes={nbDislikes} />\r\n            </CardContent>\r\n        </MUICard>\r\n    )\r\n}\r\n\r\n\r\nexport default Card","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) => {\r\n\r\n    return createStyles({\r\n        root: {\r\n            height: 500\r\n        },\r\n        container: {\r\n            display: \"flex\",\r\n            flexWrap: \"wrap\"\r\n        },\r\n        formControl: {\r\n            margin: theme.spacing(1),\r\n            minWidth: 120\r\n        },\r\n        buttonContainer: {\r\n            \"&>*\": {\r\n                margin: theme.spacing(1)\r\n            }\r\n        },\r\n        stepper: {\r\n            display: 'flex',\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\"\r\n        },\r\n        inputLabel: {\r\n            minWidth: 150\r\n        },\r\n        pagination: {\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            marginRight: theme.spacing(4)\r\n        },\r\n        header: {\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\"\r\n        }\r\n    })\r\n})","import React from 'react'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport {\r\n  selectMovies, fetchMovies, deleteMovie, next, previous, selectCurrentPage,\r\n  selectNbElements, changeElements, firstPage, selectCategory, changeCategory,\r\n  toggleLike\r\n} from \"./redux\"\r\nimport { Card } from \"./components\"\r\nimport { Select, MenuItem, FormControl, InputLabel, IconButton } from \"@material-ui/core\"\r\nimport { KeyboardArrowLeft, KeyboardArrowRight } from \"@material-ui/icons\";\r\nimport { useStyles } from \"./index_style\"\r\n\r\n\r\nexport const elements = [4, 8, 12]\r\nexport const ALL = \"All\"\r\n\r\nconst App: React.FunctionComponent<{}> = () => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  React.useEffect(() => {\r\n    dispatch(fetchMovies())\r\n  }, [dispatch])\r\n\r\n  const movies = useSelector(selectMovies)\r\n  const currentPage = useSelector(selectCurrentPage)\r\n  const nbElements = useSelector(selectNbElements)\r\n  const category = useSelector(selectCategory)\r\n\r\n  const categories = movies.reduce((acc, movie) => {\r\n    if (!acc.includes(movie.category)) {\r\n      return [...acc, movie.category]\r\n    }\r\n    else return acc\r\n  }, [ALL])\r\n\r\n  const filteredMovies = movies.filter(movie => category === ALL || movie.category === category)\r\n  const nbMovies = filteredMovies.length\r\n  const nbPages = Math.ceil(nbMovies / nbElements)\r\n\r\n  const handleChangeCategory = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    const category = event.target.value as string\r\n    dispatch(changeCategory({ category }))\r\n    const nbMovies = movies.filter(movie => category === ALL || movie.category === category).length\r\n    dispatch(changeElements({ nbElements, nbMovies }))\r\n  }\r\n\r\n  const handleChangeElements = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    const nbElements = event.target.value as number\r\n    dispatch(changeElements({ nbElements, nbMovies }))\r\n  }\r\n\r\n  const firstElementIndex = (currentPage - 1) * nbElements\r\n  const maxLastElementIndex = currentPage * nbElements\r\n  const lastElementIndex = maxLastElementIndex > nbMovies ? nbMovies : maxLastElementIndex\r\n\r\n  const visibleMovies = filteredMovies.slice(firstElementIndex, lastElementIndex)\r\n\r\n  const onDelete = (id: string) => {\r\n    dispatch(deleteMovie({ id }))\r\n  }\r\n\r\n  const handlePrevious = () => {\r\n    currentPage > firstPage && dispatch(previous())\r\n  }\r\n  const handleNext = () => {\r\n    currentPage < nbPages && dispatch(next())\r\n  }\r\n\r\n  const handleLike = (id: string) => {\r\n    dispatch(toggleLike({ id }))\r\n  }\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.header}>\r\n        <FormControl className={classes.formControl}>\r\n          <InputLabel className={classes.inputLabel}>{\"Category\"}</InputLabel>\r\n          <Select value={category}\r\n            onChange={handleChangeCategory}\r\n          >\r\n            {categories.map(category => <MenuItem value={category}>{category}</MenuItem>)}\r\n          </Select>\r\n        </FormControl>\r\n        <div className={classes.pagination}>\r\n          <FormControl className={classes.formControl}>\r\n            <InputLabel className={classes.inputLabel}>{\"Elements per page\"}</InputLabel>\r\n            <Select value={nbElements}\r\n              onChange={handleChangeElements}\r\n            >\r\n              {elements.map(element => <MenuItem value={element}>{element}</MenuItem>)}\r\n            </Select>\r\n          </FormControl>\r\n          <div className={classes.stepper}>\r\n            <div className={classes.buttonContainer}>\r\n              <IconButton onClick={handlePrevious}><KeyboardArrowLeft /></IconButton>\r\n              {currentPage}\r\n              <IconButton onClick={handleNext}><KeyboardArrowRight /></IconButton>\r\n            </div>\r\n            <div>{`${firstElementIndex + 1}-${lastElementIndex} of ${nbMovies}`}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className={classes.root}>\r\n        <div className={classes.container}>\r\n          {visibleMovies.map(movie => <Card key={movie.id} {...movie} onDelete={onDelete} handleLike={handleLike} />)}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { Movie, movies$ } from \"../movies\"\r\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\r\nimport { ALL } from \"../App\"\r\nimport { AppState } from \"./app\"\r\n\r\nexport interface MovieWithLike extends Movie {\r\n    like?: boolean\r\n}\r\n\r\nexport const fetchMovies = createAsyncThunk('movies/fetchMovies', async (arg, thunkAPI) => {\r\n    const response = await movies$\r\n    return response\r\n})\r\n\r\nconst initialState = {\r\n    movies: [] as MovieWithLike[],\r\n    category: ALL\r\n}\r\n\r\nconst moviesSlice = createSlice({\r\n    name: 'movies',\r\n    initialState,\r\n    reducers: {\r\n        deleteMovie: (state, action) => ({ ...state, movies: state.movies.filter(movie => movie.id !== action.payload.id) }),\r\n        changeCategory: (state, action) => {\r\n            state.category = action.payload.category\r\n        },\r\n        toggleLike: (state, action) => {\r\n            return {\r\n                ...state,\r\n                movies: state.movies.map(movie => {\r\n                    if (movie.id === action.payload.id) {\r\n                        return { ...movie, like: !movie.like }\r\n                    }\r\n                    else return movie\r\n                })\r\n            }\r\n        }\r\n    },\r\n    extraReducers: builder => {\r\n        builder.addCase(fetchMovies.fulfilled, (state, action) => {\r\n            state.movies.push(...action.payload)\r\n        })\r\n    }\r\n})\r\n\r\nexport default moviesSlice.reducer\r\n\r\nexport const { deleteMovie, changeCategory, toggleLike } = moviesSlice.actions\r\n\r\nexport const selectMovies = (state: AppState) => state.movies.movies\r\n\r\nexport const selectCategory = (state: AppState) => state.movies.category","import { createSlice } from '@reduxjs/toolkit'\r\nimport { elements } from \"../App\"\r\nimport { AppState } from \"./app\"\r\n\r\nexport const firstPage = 1\r\n\r\nconst initialState = {\r\n    currentPage: firstPage,\r\n    nbElements: elements[1]\r\n}\r\n\r\n\r\nconst paginationSlice = createSlice({\r\n    name: 'pagination',\r\n    initialState,\r\n    reducers: {\r\n        previous: (state) => {\r\n            state.currentPage -= 1\r\n        },\r\n        next: (state) => {\r\n            state.currentPage += 1\r\n        },\r\n        changeElements: (state, action) => {\r\n            const { nbMovies, nbElements } = action.payload\r\n            state.nbElements = nbElements\r\n            const nbPages = Math.ceil(nbMovies / nbElements)\r\n            state.currentPage = state.currentPage >= nbPages ? nbPages : state.currentPage\r\n        }\r\n    },\r\n    extraReducers: {\r\n    }\r\n})\r\n\r\nexport default paginationSlice.reducer\r\n\r\nexport const { previous, next, changeElements } = paginationSlice.actions\r\n\r\nexport const selectCurrentPage = (state: AppState) => state.pagination.currentPage\r\nexport const selectNbElements = (state: AppState) => state.pagination.nbElements","import { configureStore } from '@reduxjs/toolkit'\r\nimport movies from \"./movies\"\r\nimport pagination from \"./pagination\"\r\n\r\nconst rootReducer = {\r\n    reducer: {\r\n        movies,\r\n        pagination\r\n    }\r\n}\r\n\r\nexport const appStore = configureStore(rootReducer)\r\n\r\nexport type AppState = ReturnType<typeof appStore.getState>","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from \"react-redux\";\r\nimport { appStore } from \"./redux\";\r\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nconst theme = createMuiTheme({\r\n  spacing: 8\r\n});\r\n\r\nReactDOM.render(\r\n  <Provider store={appStore}>\r\n    <ThemeProvider theme={theme}>\r\n      <React.StrictMode>\r\n        <App />\r\n      </React.StrictMode>\r\n    </ThemeProvider>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}